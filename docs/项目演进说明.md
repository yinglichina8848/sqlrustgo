# SQLRustGo 项目演进说明

> 本文档详细记录 SQLRustGo 项目从零开始的完整演进过程，帮助学生和开发者复现 AI 协作开发的完整流程。

---

## 零、项目起源

### 0.1 项目诞生记

SQLRustGo 项目的诞生，源于一次 AI 与软件工程的探索实验。

📖 **完整故事**：[项目诞生记](项目诞生记.md)

> 从 DeepSeek 671B 全参数模型在 HP Z6-G4 服务器上的首次运行，到 Trae IDE 的 AI 原生开发实践，再到 SQLRustGo 的诞生——这是一个关于 AI 如何改变软件开发方式的真实故事。

### 0.2 最初的设计对话

项目的最初计划，来自 **Claude 的 superpowers: brainstorms** 功能——对 sqlcc 项目进行分析和规划：

📖 **原始对话**：[Claude对话记录](v1.0/Claude对话记录.md)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          项目起源路径                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   sqlcc 项目（C++ 实现）                                                     │
│         │                                                                    │
│         ▼                                                                    │
│   Claude superpowers: brainstorms                                           │
│   （项目分析和规划）                                                          │
│         │                                                                    │
│         ▼                                                                    │
│   Claude对话记录.md                                                          │
│   （最初的设计决策）                                                          │
│         │                                                                    │
│         ▼                                                                    │
│   SQLRustGo 项目                                                             │
│   （Rust 全新实现）                                                           │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 0.3 从想法到实现

| 阶段 | 文档 | 说明 |
|:-----|:-----|:-----|
| **起源** | [项目诞生记](项目诞生记.md) | 项目故事和 AI 协作历程 |
| **设计** | [Claude对话记录](v1.0/Claude对话记录.md) | 最初的设计决策和技术选型 |
| **规划** | [草稿计划/](v1.0/草稿计划/) | 详细的实施计划 |
| **实现** | [草稿/](v1.0/草稿/) | 开发过程记录 |
| **评估** | [评估改进/](v1.0/评估改进/) | 问题分析和改进方向 |

---

## 一、项目概述

### 1.1 项目定位

SQLRustGo 是一个**教学演示型**项目，用于展示：
- 如何使用 AI 工具链进行软件开发
- 如何建立 SDD（Spec-Driven Development）规范和流程
- 如何实现多 Agent 协作开发
- 如何从零构建一个 SQL 数据库系统

### 1.2 核心成果

| 指标 | 数值 |
|:-----|:-----|
| 开发周期 | 5 天 (2026-02-13 ~ 2026-02-18) |
| 核心代码 | 5000+ 行 Rust |
| 测试覆盖率 | 82.24% 行覆盖 |
| 测试数量 | 118+ 个 |
| PR 合并 | 17 个 |
| 参与账号 | 4 个 AI Agent |

---

## 二、时间线演进图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        SQLRustGo 项目演进时间线                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  2026-02-13                                                                 │
│  ├── 项目初始化                                                             │
│  │   ├── 需求确认 (Q&A)                                                     │
│  │   ├── 设计文档编写                                                       │
│  │   └── 实施计划制定                                                       │
│  ├── Task 1: Rust 项目结构                                                  │
│  └── Task 2: CI/CD 配置                                                     │
│                                                                              │
│  2026-02-14                                                                 │
│  ├── Task 3: 类型系统                                                       │
│  ├── Task 4: 词法分析器                                                     │
│  ├── Task 5: 语法分析器                                                     │
│  ├── Task 6: 存储引擎                                                       │
│  ├── Task 8: 查询执行器                                                     │
│  ├── Task 9: REPL + 事务管理                                                │
│  └── Task 10: 网络协议层                                                    │
│                                                                              │
│  2026-02-15                                                                 │
│  ├── Task 11: 集成测试                                                      │
│  ├── PR #2: B+ Tree 索引                                                    │
│  ├── PR #3: README 增强                                                     │
│  ├── PR #4: MySQL 协议完善                                                  │
│  ├── PR #5: 索引优化                                                        │
│  ├── PR #6: 测试覆盖率                                                      │
│  └── PR #8: 文档完善                                                        │
│                                                                              │
│  2026-02-16                                                                 │
│  ├── 版本评估报告                                                           │
│  ├── 分支策略制定                                                           │
│  ├── AI 协作指南编写                                                        │
│  └── 综合改进计划                                                           │
│                                                                              │
│  2026-02-17                                                                 │
│  ├── PR #12: CI/流程加固                                                    │
│  ├── PR #13: Clippy 修复                                                    │
│  ├── PR #14: Evaluation → Alpha                                            │
│  ├── PR #21: 测试覆盖率增强                                                 │
│  ├── PR #24-26: 网络集成测试                                                │
│  └── v1.0.0 标签发布                                                        │
│                                                                              │
│  2026-02-18                                                                 │
│  ├── 文档补全计划                                                           │
│  ├── Phase 2 准备                                                           │
│  └── 多 Agent 协作优化                                                      │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 三、规划与任务制定

### 3.1 需求确认流程

项目启动时，通过 **Q&A 对话**逐步明确需求：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          需求确认 Q&A 流程                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   用户需求 ──→ AI 提问 ──→ 用户选择 ──→ 需求明确                           │
│                                                                              │
│   问题示例：                                                                 │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │ Q1: 项目定位？                                                       │   │
│   │     A) 开源学习项目  B) 商业化项目                                    │   │
│   │     → 用户选择: B                                                    │   │
│   │                                                                      │   │
│   │ Q2: SQL 标准支持？                                                   │   │
│   │     SQL-92 → SQL-99 → SQL-2023                                      │   │
│   │     → 用户选择: SQL-92 子集                                          │   │
│   │                                                                      │   │
│   │ Q3: 重写方式？                                                       │   │
│   │     A) 增量改进  B) 混合重构  C) 全新实现                            │   │
│   │     → 用户选择: C                                                    │   │
│   │                                                                      │   │
│   │ Q4: 质量指标？                                                       │   │
│   │     编译: 100%  测试: 80%  性能: 50%  文档: 完整                     │   │
│   │     → 用户确认: 全部接受                                             │   │
│   │                                                                      │   │
│   │ Q5: 技术栈和截止日期？                                               │   │
│   │     → 用户选择: Rust, 3月1日 demo                                   │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 任务分解结构

基于需求，将项目分解为 11 个 Task：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Task 分解结构                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  阶段一: 项目基础设施                                                        │
│  ├── Task 1: 创建 Rust 项目结构 (Cargo.toml, src/, tests/)                  │
│  └── Task 2: 配置 AI 工具链和 CI/CD                                         │
│                                                                              │
│  阶段二: 核心类型                                                            │
│  └── Task 3: 定义类型系统 (Value, SqlError, Statement)                      │
│                                                                              │
│  阶段三: 解析器                                                              │
│  ├── Task 4: 实现词法分析器 (Lexer, Token)                                  │
│  └── Task 5: 实现语法分析器 (Parser, AST)                                   │
│                                                                              │
│  阶段四: 存储层                                                              │
│  ├── Task 6: 实现存储引擎 (Page, BufferPool, FileStorage)                   │
│  └── Task 7: 实现 B+ Tree 索引                                              │
│                                                                              │
│  阶段五: 执行层                                                              │
│  └── Task 8: 实现查询执行器 (ExecutionEngine)                               │
│                                                                              │
│  阶段六: 用户接口                                                            │
│  └── Task 9: 实现 REPL 和 CLI                                               │
│                                                                              │
│  阶段七: 事务管理                                                            │
│  └── Task 9+: 实现 WAL 和事务管理器                                         │
│                                                                              │
│  阶段八: 网络协议                                                            │
│  └── Task 10: 实现 MySQL 协议层                                             │
│                                                                              │
│  阶段九: 集成测试                                                            │
│  └── Task 11: 添加集成测试                                                  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 四、SDD 规范与流程建立

### 4.1 SDD (Spec-Driven Development) 流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        SDD 开发流程                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐            │
│   │  需求    │ ─→ │  设计    │ ─→ │  实现    │ ─→ │  验证    │            │
│   │  分析    │    │  文档    │    │  编码    │    │  测试    │            │
│   └──────────┘    └──────────┘    └──────────┘    └──────────┘            │
│        ↑                                                │                   │
│        └────────────────────────────────────────────────┘                   │
│                         迭代反馈                                             │
│                                                                              │
│   文档先行原则：                                                             │
│   1. 先写设计文档 (docs/*.md)                                               │
│   2. 再写测试用例 (tests/*.rs)                                              │
│   3. 最后实现代码 (src/*.rs)                                                │
│   4. 验证通过后提交 PR                                                      │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 质量门禁

每个 PR 必须通过以下检查：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           质量门禁检查                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐      │
│   │  编译检查       │ ─→  │  测试检查       │ ─→  │  Clippy 检查    │      │
│   │  cargo build    │     │  cargo test     │     │  cargo clippy   │      │
│   │  必须: 通过     │     │  必须: 全部通过 │     │  必须: 无警告   │      │
│   └─────────────────┘     └─────────────────┘     └─────────────────┘      │
│            │                      │                       │                 │
│            ↓                      ↓                       ↓                 │
│   ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐      │
│   │  格式化检查     │ ─→  │  覆盖率检查     │ ─→  │  PR 审查        │      │
│   │  cargo fmt      │     │  cargo tarpaulin│     │  至少 1 人通过  │      │
│   │  必须: 通过     │     │  目标: ≥ 80%    │     │  必须: 批准     │      │
│   └─────────────────┘     └─────────────────┘     └─────────────────┘      │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 五、分支策略与版本管理

### 5.1 分支架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           分支管理架构                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│                    main (稳定版本 - 保护分支)                               │
│                    │                                                         │
│                    ↑ 合并                                                    │
│                    │                                                         │
│                    baseline (基线版本 - 保护分支)                           │
│                    │                                                         │
│          ┌────────┴────────┐                                                │
│          ↑                 ↑                                                 │
│          │                 │                                                 │
│   feature/v1.0.0-alpha  feature/v1.0.0-beta                                │
│   (文档补全+错误修复)    (自动测试+性能分析+CI/CD)                          │
│          │                 │                                                 │
│          ↑                 ↑                                                 │
│          │                 │                                                 │
│   ┌──────┴──────┐   ┌──────┴──────┐                                        │
│   │             │   │             │                                        │
│ feature/*   feature/*  feature/*  feature/*                                │
│ (单个功能)  (单个功能) (单个功能) (单个功能)                                 │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.2 版本发布流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          版本发布流程                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   功能开发 ──→ 功能分支 ──→ Alpha 分支 ──→ Beta 分支 ──→ baseline ──→ main │
│                                                                              │
│   Alpha 阶段:                                                               │
│   ├── 测试覆盖率 ≥ 90%                                                      │
│   ├── 所有单元测试通过                                                      │
│   ├── 集成测试通过                                                          │
│   └── 无编译警告                                                            │
│                                                                              │
│   Beta 阶段:                                                                │
│   ├── API 文档完整                                                          │
│   ├── 用户手册更新                                                          │
│   ├── CHANGELOG 更新                                                        │
│   └── 示例代码可用                                                          │
│                                                                              │
│   Release 阶段:                                                             │
│   ├── 基准测试通过                                                          │
│   ├── 性能基线建立                                                          │
│   ├── 安全扫描通过                                                          │
│   └── 版本标签发布                                                          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 六、角色与权限定义

### 6.1 AI Agent 角色分配

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          AI Agent 角色分配                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                        OpenClaw (高小药)                             │   │
│   │                        协调者 / 调度者                               │   │
│   │   ┌─────────────────────────────────────────────────────────────┐   │   │
│   │   │  职责:                                                       │   │   │
│   │   │  • 监控所有 AI Agent 状态                                    │   │   │
│   │   │  • 分配任务和协调工作                                        │   │   │
│   │   │  • 处理冲突和决策                                            │   │   │
│   │   │  • 维护项目文档和流程                                        │   │   │
│   │   └─────────────────────────────────────────────────────────────┘   │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                    ┌───────────────┼───────────────┐                        │
│                    ↓               ↓               ↓                        │
│   ┌────────────────────┐ ┌────────────────────┐ ┌────────────────────┐    │
│   │  Claude Code       │ │  OpenCode          │ │  Codex             │    │
│   │  (sonaheartopen)   │ │  (sonaopenheart)   │ │  (yinglichina8848) │    │
│   │  ──────────────    │ │  ──────────────    │ │  ──────────────    │    │
│   │  角色: 开发者      │ │  角色: 文档/流程   │ │  角色: 验收/门禁   │    │
│   │  职责:             │ │  职责:             │ │  职责:             │    │
│   │  • 编写代码        │ │  • 编写文档        │ │  • 运行测试        │    │
│   │  • 实现功能        │ │  • 维护流程        │ │  • 检查覆盖率      │    │
│   │  • 修复 Bug        │ │  • 整理记录        │ │  • Clippy 检查     │    │
│   └────────────────────┘ └────────────────────┘ └────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 GitHub 账号与权限

| 账号 | 角色 | 权限 | 工作目录 |
|:-----|:-----|:-----|:---------|
| yinglichina8848 | Owner | 完全权限 | ~/workspace/yingli/sqlrustgo |
| sonaheartopen | Developer | Push/PR | ~/workspace/heartopen/sqlrustgo |
| sonaopenheart | Developer | Push/PR | ~/workspace/openheart/sqlrustgo |
| minzuuniversity | Organization | Admin | 组织仓库 |

---

## 七、AI 工具配置与协作

### 7.1 工具链配置

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          AI 工具链配置                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Claude Code 配置 (.claude/claude_desktop_config.json):                   │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │  {                                                                   │   │
│   │    "model": "claude-3-5-sonnet",                                    │   │
│   │    "max_tokens": 4096,                                              │   │
│   │    "temperature": 0.7,                                              │   │
│   │    "skills": [                                                      │   │
│   │      "superpowers:tdd-workflow",                                    │   │
│   │      "superpowers:code-review",                                     │   │
│   │      "superpowers:verification"                                     │   │
│   │    ]                                                                │   │
│   │  }                                                                   │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   GitHub Actions CI (.github/workflows/ci.yml):                             │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │  jobs:                                                               │   │
│   │    build:                                                            │   │
│   │      runs-on: ubuntu-latest                                         │   │
│   │      steps:                                                          │   │
│   │        - uses: actions/checkout@v4                                  │   │
│   │        - run: cargo build --all-features                            │   │
│   │        - run: cargo test --all-features                             │   │
│   │        - run: cargo clippy --all-features -- -D warnings            │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 7.2 协作工作流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        多 Agent 协作工作流                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   1. 任务分配阶段                                                           │
│   ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐          │
│   │  Issue  │ ───→ │ OpenClaw│ ───→ │ 分配任务│ ───→ │ 通知各  │          │
│   │  创建   │      │  分析   │      │ 给 Agent│      │ Agent   │          │
│   └─────────┘      └─────────┘      └─────────┘      └─────────┘          │
│                                                                              │
│   2. 并行开发阶段                                                           │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                                                                      │   │
│   │   Claude Code          OpenCode            Codex                    │   │
│   │   ┌─────────┐          ┌─────────┐        ┌─────────┐              │   │
│   │   │ 编写代码│          │ 编写文档│        │ 运行测试│              │   │
│   │   │ 实现功能│          │ 更新流程│        │ 检查覆盖│              │   │
│   │   └────┬────┘          └────┬────┘        └────┬────┘              │   │
│   │        │                    │                  │                    │   │
│   │        └────────────────────┼──────────────────┘                    │   │
│   │                             ↓                                        │   │
│   │                      ┌─────────────┐                                │   │
│   │                      │  创建 PR    │                                │   │
│   │                      └─────────────┘                                │   │
│   │                                                                      │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   3. 审查合并阶段                                                           │
│   ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐          │
│   │  PR     │ ───→ │ CI 检查 │ ───→ │ 代码审查│ ───→ │ 合并到  │          │
│   │  提交   │      │ 自动运行│      │ 人工/AI │      │ 目标分支│          │
│   └─────────┘      └─────────┘      └─────────┘      └─────────┘          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 八、主要 PR 提交记录

### 8.1 PR 列表

| PR # | 标题 | 合并时间 | 主要内容 |
|:----:|:-----|:---------|:---------|
| #2 | B+ Tree 索引持久化和查询优化 | 2026-02-15 | 索引功能 |
| #3 | README 增强 | 2026-02-15 | 文档完善 |
| #4 | MySQL 网络协议层完善 | 2026-02-15 | 网络功能 |
| #5 | 索引优化与网络协议完善 | 2026-02-15 | 功能增强 |
| #6 | 测试覆盖率和文档增强 | 2026-02-16 | 测试+文档 |
| #8 | Task 11 完成，系统类型文档完善 | 2026-02-16 | 文档 |
| #12 | CI/流程加固 | 2026-02-17 | 流程规范 |
| #13 | Clippy 修复 | 2026-02-17 | 代码质量 |
| #14 | Evaluation → Alpha | 2026-02-17 | 版本发布 |
| #21 | 测试覆盖率增强 | 2026-02-17 | 测试 |
| #24 | Network 模块集成测试 | 2026-02-17 | 测试 |
| #25 | Alpha 版本文档补全计划 | 2026-02-17 | 文档 |
| #26 | Network 集成测试 | 2026-02-17 | 测试 |

### 8.2 PR 提交流程图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          PR 提交流程                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   功能分支                                                                   │
│   ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐          │
│   │ 编写代码│ ───→ │ 本地测试│ ───→ │ Git Push│ ───→ │ 创建 PR │          │
│   └─────────┘      └─────────┘      └─────────┘      └─────────┘          │
│                                                              │              │
│                                                              ↓              │
│   CI 自动检查                                                │              │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐         │  │
│   │  │ Build   │ ─→ │ Test    │ ─→ │ Clippy  │ ─→ │ Fmt     │         │  │
│   │  │ ✓/✗     │    │ ✓/✗     │    │ ✓/✗     │    │ ✓/✗     │         │  │
│   │  └─────────┘    └─────────┘    └─────────┘    └─────────┘         │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                          │                                  │
│                                          ↓                                  │
│   代码审查                               │                                  │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  人工审查 ───→ AI 审查 ───→ 提出修改建议 ───→ 开发者修改            │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                          │                                  │
│                                          ↓                                  │
│   合并                                   │                                  │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  所有检查通过 ───→ 审查批准 ───→ Squash Merge ───→ 关闭 PR         │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 九、Issue 驱动开发

### 9.1 Issue 分类

| Issue # | 标题 | 状态 | 类型 |
|:-------:|:-----|:-----|:-----|
| #1 | 多分支并行开发 - AI 协作 | OPEN | 协作框架 |
| #9 | v1.0.0 版本评估报告评审请求 | OPEN | 评审 |
| #16 | Alpha 版本必须改进工作 | OPEN | 改进 |
| #17 | Phase 1: v1.0.0-alpha 收尾 | OPEN | 任务 |
| #18 | Phase 2: v1.1.0-beta 功能与流程 | OPEN | 任务 |
| #19 | Phase 3: baseline 集成与发布闸门 | OPEN | 任务 |
| #20 | Phase 4: 教学演示与复盘 | OPEN | 任务 |

### 9.2 Issue 驱动流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          Issue 驱动开发流程                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐          │
│   │ 创建    │ ───→ │ 分配    │ ───→ │ 开发    │ ───→ │ 关闭    │          │
│   │ Issue   │      │ 给 Agent│      │ 功能    │      │ Issue   │          │
│   └─────────┘      └─────────┘      └─────────┘      └─────────┘          │
│        │                                                   │              │
│        ↓                                                   ↓              │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │ Issue 模板:                                                          │  │
│   │                                                                      │  │
│   │ ## 问题描述                                                          │  │
│   │ 清晰描述要实现的功能或修复的问题                                     │  │
│   │                                                                      │  │
│   │ ## 验收标准                                                          │  │
│   │ - [ ] 功能实现                                                       │  │
│   │ - [ ] 测试通过                                                       │  │
│   │ - [ ] 文档更新                                                       │  │
│   │                                                                      │  │
│   │ ## 相关 PR                                                           │  │
│   │ - PR #xxx                                                            │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 十、从零开始复现指南

### 10.1 环境准备

```bash
# 1. 安装 Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# 2. 安装 Git
# macOS: brew install git
# Linux: apt install git

# 3. 配置 Git
git config --global user.name "Your Name"
git config --global user.email "your@email.com"

# 4. 安装 GitHub CLI
# macOS: brew install gh
# Linux: https://github.com/cli/cli/blob/trunk/docs/install_linux.md

# 5. 登录 GitHub
gh auth login
```

### 10.2 项目初始化

```bash
# 1. 创建项目目录
mkdir -p ~/workspace/your-project
cd ~/workspace/your-project

# 2. 初始化 Git
git init
git checkout -b main

# 3. 创建 Rust 项目
cargo init

# 4. 创建基础目录结构
mkdir -p .github/workflows .claude docs/plans tests

# 5. 创建 GitHub 仓库
gh repo create your-project --private --source=. --push
```

### 10.3 AI 工具配置

```bash
# 1. 安装 Claude Code
# 参考: https://docs.anthropic.com/claude-code

# 2. 安装 OpenCode
# 参考: https://github.com/opencode-ai/opencode

# 3. 配置项目级 Claude 设置
cat > .claude/claude_desktop_config.json << 'EOF'
{
  "model": "claude-3-5-sonnet",
  "max_tokens": 4096,
  "temperature": 0.7
}
EOF
```

### 10.4 开发流程

```bash
# 1. 创建功能分支
git checkout -b feature/your-feature

# 2. 开发 (使用 AI 辅助)
# 在 Claude Code 中描述需求，让 AI 帮你实现

# 3. 运行测试
cargo test --all-features

# 4. 运行 Clippy
cargo clippy --all-features -- -D warnings

# 5. 格式化代码
cargo fmt

# 6. 提交代码
git add .
git commit -m "feat: 实现某某功能"

# 7. 推送并创建 PR
git push origin feature/your-feature
gh pr create --title "feat: 实现某某功能" --body "描述..."
```

---

## 十一、经验总结

### 11.1 成功经验

1. **文档先行**: 先写设计文档，再写代码，减少返工
2. **测试驱动**: TDD 确保代码质量，覆盖率目标明确
3. **分支隔离**: 使用 Git Worktree 隔离开发环境
4. **自动化 CI**: 让机器检查代码质量，减少人工错误
5. **多 Agent 协作**: 分工明确，并行开发，提高效率

### 11.2 踩过的坑

1. **分支混乱**: 早期没有明确的分支策略，导致混乱
2. **AI 幻觉**: AI 有时会生成不存在的 API，需要验证
3. **上下文丢失**: 长对话中 AI 会忘记之前的约定
4. **权限问题**: 多账号协作时权限配置复杂
5. **工具兼容**: 不同 AI 工具的工作流不完全兼容

### 11.3 最佳实践

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          最佳实践总结                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   1. 需求阶段                                                               │
│      • 使用 Q&A 对话明确需求                                                │
│      • 写下验收标准                                                         │
│      • 估算工作量                                                           │
│                                                                              │
│   2. 设计阶段                                                               │
│      • 先写设计文档                                                         │
│      • 画出架构图                                                           │
│      • 定义接口规范                                                         │
│                                                                              │
│   3. 开发阶段                                                               │
│      • 使用功能分支                                                         │
│      • 遵循 TDD 流程                                                        │
│      • 小步提交，频繁推送                                                   │
│                                                                              │
│   4. 审查阶段                                                               │
│      • CI 检查必须通过                                                      │
│      • 人工审查代码逻辑                                                     │
│      • AI 辅助检查边界情况                                                  │
│                                                                              │
│   5. 发布阶段                                                               │
│      • 版本号遵循语义化版本                                                 │
│      • 更新 CHANGELOG                                                       │
│      • 打标签发布                                                           │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 十二、参考资料

- [项目 README](../README.md)
- [架构设计文档](architecture.md)
- [开发者文档](dev/DEVELOP.md)
- [AI 协作指南](plans/2026-02-16-ai-collaboration-guide.md)
- [分支策略](plans/2026-02-16-branch-strategy.md)
- [版本演化规划](plans/2026-02-16-version-evolution-plan.md)
- [综合改进计划](v1.0.0评估改进/综合改进计划.md)

---

*本文档持续更新中，记录项目演进的每一个重要节点。*
