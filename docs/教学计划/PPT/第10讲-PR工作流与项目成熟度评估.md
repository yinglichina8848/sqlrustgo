---
marp: true
theme: gaia
paginate: true
backgroundColor: #fff
color: #333
---

<!-- _class: lead -->

# 第十讲：PR工作流与项目成熟度评估

## AI增强的软件工程

---

# 课程大纲

1. **PR工作流详解**（25分钟）
2. **项目成熟度评估**（25分钟）
3. **v2.0功能规划**（20分钟）
4. **实践练习**（10分钟）

---

# Part 1: PR工作流详解

---

## 1.1 What：什么是PR工作流

### Pull Request定义

一种代码合并请求机制，用于代码审核和讨论

### PR工作流的作用

- **代码审核**：确保代码质量
- **知识共享**：团队成员互相学习
- **历史记录**：保留变更讨论记录
- **自动化检查**：触发CI/CD流程

---

## 1.2 Why：为什么使用PR工作流

### 质量保证

- 多人审核代码
- 发现潜在问题
- 保证代码规范

### 知识传递

- 团队成员了解代码变更
- 分享最佳实践
- 新成员快速上手

### 协作效率

- 集中讨论代码变更
- 减少会议时间
- 异步协作

---

## 1.3 How：PR工作流最佳实践

### 创建PR

```markdown
## 变更类型
- [x] 新功能

## 变更说明
添加JOIN支持，包括：
- INNER JOIN
- LEFT JOIN
- RIGHT JOIN

## 测试说明
- 添加了单元测试
- 添加了集成测试
- 测试覆盖率：85%

## 相关Issue
Closes #45
```

---

## 1.3 How：PR工作流最佳实践（续）

### 审核PR

**审核检查清单**：
- [ ] 代码是否实现了预期功能
- [ ] 代码是否清晰易读
- [ ] 是否有足够的测试
- [ ] 是否更新了文档
- [ ] 是否符合编码规范

**审核意见类型**：
- **必须修改**：`MUST: 需要添加错误处理`
- **建议修改**：`SUGGEST: 可以简化这个逻辑`
- **问题讨论**：`QUESTION: 这里为什么使用B+树而不是哈希索引？`

---

## 1.3 How：PR工作流最佳实践（续）

### 合并PR

**合并前检查**：
- [ ] 所有审核意见已解决
- [ ] CI检查全部通过
- [ ] 代码已更新到最新
- [ ] 测试覆盖率达标

**合并方式**：
- **Merge commit**：保留完整历史
- **Squash and merge**：压缩为一个提交
- **Rebase and merge**：变基合并

---

# Part 2: 项目成熟度评估

---

## 2.1 What：什么是项目成熟度

### 定义

项目在功能完整性、代码质量、文档完善度等方面的综合评估

### 成熟度等级

| 等级 | 名称 | 特征 |
|------|------|------|
| 1 | 原型 | 功能可用，质量较低 |
| 2 | Alpha | 功能完整，有测试 |
| 3 | Beta | 功能稳定，用户测试 |
| 4 | RC | 发布候选，质量门禁 |
| 5 | Release | 生产就绪，稳定可靠 |

---

## 2.2 Why：为什么需要成熟度评估

### 项目管理

- 了解项目当前状态
- 规划下一步工作
- 分配资源

### 质量控制

- 确保达到发布标准
- 识别质量风险
- 持续改进

### 沟通协作

- 向利益相关者报告进度
- 团队对齐目标
- 用户了解产品状态

---

## 2.3 How：v2.0成熟度评估

### 评估维度

| 维度 | 指标 | 目标 | 当前状态 |
|------|------|------|---------|
| 代码质量 | 测试覆盖率 | ≥80% | 75% |
| 代码质量 | Clippy警告 | 0 | 0 |
| 功能完整性 | 核心功能 | 100% | 90% |
| 文档完善 | API文档 | 100% | 85% |
| CI/CD | 自动化检查 | 100% | 100% |

---

## 2.3 How：v2.0成熟度评估（续）

### 评估结果

```
┌─────────────────────────────────────────────────────┐
│           SQLRustGo v2.0 成熟度评估                  │
├─────────────────────────────────────────────────────┤
│  代码质量    ████████░░  80%  达标                  │
│  功能完整性  ████████░░  90%  接近目标              │
│  文档完善    ████████░░  85%  需改进                │
│  CI/CD      ██████████  100% 达标                  │
│  安全合规    ███████░░░  70%  需改进                │
├─────────────────────────────────────────────────────┤
│  综合评分    ████████░░  85%  达到Beta级别          │
└─────────────────────────────────────────────────────┘
```

### 改进计划

- 提高测试覆盖率至80%+
- 完善API文档
- 添加安全扫描

---

# Part 3: v2.0功能规划

---

## 3.1 What：v2.0新功能

### JOIN支持

- INNER JOIN
- LEFT JOIN
- RIGHT JOIN
- FULL OUTER JOIN

### 子查询支持

- WHERE子句子查询
- FROM子句子查询
- SELECT子句子查询

### 视图支持

- CREATE VIEW
- DROP VIEW
- 视图查询

---

## 3.2 Why：为什么需要这些功能

### JOIN支持

- 关系数据库的核心功能
- 支持多表查询
- 提高数据关联能力

### 子查询支持

- 复杂查询的必要功能
- 提高查询灵活性
- 支持嵌套查询

### 视图支持

- 简化复杂查询
- 提供数据抽象层
- 增强安全性

---

## 3.3 How：v2.0实现计划

### 开发周期

| 功能 | 周次 | 负责人 |
|------|------|--------|
| JOIN支持 | 第10-12周 | Team A |
| 子查询支持 | 第13-14周 | Team B |
| 视图支持 | 第15周 | Team C |

### 技术方案

- **JOIN实现**：修改Parser、Planner、Executor
- **子查询实现**：扩展AST、优化执行计划
- **视图实现**：添加视图管理模块

---

# Part 4: 实践练习

---

## 4.1 创建v2.0功能分支

```bash
# 创建JOIN功能分支
git checkout -b feature/add-join-support

# 创建子查询功能分支
git checkout -b feature/add-subquery-support

# 创建视图功能分支
git checkout -b feature/add-view-support
```

---

## 4.2 编写功能设计文档

### 设计文档模板

```markdown
# JOIN功能设计

## 功能描述
支持多表JOIN查询

## 技术方案
1. Parser层：扩展SQL语法
2. Planner层：生成JOIN执行计划
3. Executor层：实现JOIN算子

## 接口设计
```rust
pub struct JoinOperator {
    left: Box<Operator>,
    right: Box<Operator>,
    condition: Expression,
    join_type: JoinType,
}
```

## 测试计划
- 单元测试：JOIN算子测试
- 集成测试：多表查询测试
```

---

# 核心知识点总结

---

## 1. PR工作流

- **What**：代码合并请求机制
- **Why**：质量保证、知识传递、协作效率
- **How**：创建PR → 审核 → 修改 → 合并

## 2. 项目成熟度评估

- **What**：项目综合评估
- **Why**：项目管理、质量控制、沟通协作
- **How**：多维度评估、制定改进计划

## 3. v2.0功能规划

- **JOIN支持**
- **子查询支持**
- **视图支持**

---

# 课后作业

---

## 任务

1. 创建v2.0功能分支
2. 编写功能设计文档
3. 提交PR进行审核

## 预习

- CI/CD与OpenClaw自动化
- 多AI协作

---

<!-- _class: lead -->

# 谢谢！

## 下节课：CI/CD与OpenClaw自动化
