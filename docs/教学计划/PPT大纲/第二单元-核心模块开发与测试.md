# 第二单元：核心模块开发与测试（第5-8周）

## 单元概述

| 项目 | 内容 |
|------|------|
| **单元名称** | 核心模块开发与测试 |
| **周次** | 第5-8周 |
| **学时** | 16学时（8理论 + 8实训） |
| **教学目标** | 完成查询执行器、存储引擎开发，掌握AI辅助测试方法 |
| **对应项目阶段** | Executor模块 → Storage模块 → 测试覆盖率提升 |

---

## 第5周：查询执行器实现

### 理论课PPT大纲（2学时）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        第5讲：查询执行器实现                                  │
│                        （PPT 40页，80分钟）                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Part 1: 查询执行模型（20分钟，10页）                                        │
│   ├── 1.1 执行模型概述（3页）                                                │
│   │   ├── 解释执行                                                           │
│   │   ├── 编译执行                                                           │
│   │   └── 向量化执行                                                         │
│   ├── 1.2 Volcano模型（4页）                                                 │
│   │   ├── 迭代器模式                                                         │
│   │   ├── pull模型                                                           │
│   │   ├── 执行器组合                                                         │
│   │   └── 性能特点                                                           │
│   ├── 1.3 执行计划（3页）                                                    │
│   │   ├── 逻辑计划                                                           │
│   │   ├── 物理计划                                                           │
│   │   └── 计划优化                                                           │
│   └── 1.4 SQLRustGo执行模型（2页）                                           │
│                                                                              │
│   Part 2: 执行器框架设计（20分钟，10页）                                      │
│   ├── 1.1 执行器接口设计（4页）                                              │
│   │   ├── Executor Trait                                                     │
│   │   ├── 执行上下文                                                         │
│   │   ├── 结果集                                                             │
│   │   └── 错误处理                                                           │
│   ├── 2.2 执行器类型（4页）                                                  │
│   │   ├── TableScanExecutor                                                  │
│   │   ├── FilterExecutor                                                     │
│   │   ├── ProjectExecutor                                                    │
│   │   └── JoinExecutor                                                       │
│   └── 2.3 执行器组合（2页）                                                  │
│                                                                              │
│   Part 3: AI辅助执行器实现（25分钟，12页）                                    │
│   ├── 3.1 使用AI设计执行器接口（3页）                                        │
│   ├── 3.2 使用AI实现TableScan执行器（3页）                                   │
│   ├── 3.3 使用AI实现Filter执行器（3页）                                      │
│   ├── 3.4 使用AI实现Project执行器（3页）                                     │
│   └── 3.5 测试验证（2页）                                                    │
│                                                                              │
│   Part 4: SQLRustGo执行器分析（15分钟，6页）                                  │
│   ├── 4.1 执行器结构（3页）                                                  │
│   └── 4.2 核心代码分析（3页）                                                │
│                                                                              │
│   总结与作业（2页）                                                          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 实训课内容（2学时）

**实训名称**：执行器开发

**实训目标**：
- 使用AI-IDE实现执行器接口
- 实现基本执行器
- 编写测试用例
- 运行测试验证

---

## 第6周：存储引擎实现

### 理论课PPT大纲（2学时）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        第6讲：存储引擎实现                                    │
│                        （PPT 40页，80分钟）                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Part 1: 存储引擎概述（20分钟，10页）                                        │
│   ├── 1.1 存储引擎的作用（2页）                                              │
│   ├── 1.2 存储模型（3页）                                                    │
│   │   ├── 行存储                                                             │
│   │   ├── 列存储                                                             │
│   │   └── 混合存储                                                           │
│   ├── 1.3 页式存储（3页）                                                    │
│   │   ├── 页结构设计                                                         │
│   │   ├── 页头                                                               │
│   │   └── 数据区                                                             │
│   └── 1.4 缓冲区管理（2页）                                                  │
│                                                                              │
│   Part 2: 索引结构（20分钟，10页）                                           │
│   ├── 2.1 索引概述（2页）                                                    │
│   ├── 2.2 B+树索引（4页）                                                    │
│   │   ├── B+树结构                                                           │
│   │   ├── 查找操作                                                           │
│   │   ├── 插入操作                                                           │
│   │   └── 删除操作                                                           │
│   ├── 2.3 哈希索引（2页）                                                    │
│   └── 2.4 索引选择（2页）                                                    │
│                                                                              │
│   Part 3: AI辅助存储引擎实现（20分钟，10页）                                  │
│   ├── 3.1 使用AI设计页结构（3页）                                            │
│   ├── 3.2 使用AI实现缓冲区管理器（3页）                                      │
│   ├── 3.3 使用AI实现简单索引（2页）                                          │
│   └── 3.4 测试验证（2页）                                                    │
│                                                                              │
│   Part 4: 数据持久化（20分钟，8页）                                           │
│   ├── 4.1 文件存储（2页）                                                    │
│   ├── 4.2 序列化（3页）                                                      │
│   ├── 4.3 数据恢复（2页）                                                    │
│   └── 4.4 SQLRustGo存储引擎分析（1页）                                       │
│                                                                              │
│   总结与作业（2页）                                                          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 实训课内容（2学时）

**实训名称**：存储引擎开发

**实训目标**：
- 使用AI-IDE实现页结构
- 实现缓冲区管理器
- 实现数据持久化
- 编写测试用例

---

## 第7周：测试与AI辅助测试

### 理论课PPT大纲（2学时）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        第7讲：测试与AI辅助测试                                │
│                        （PPT 40页，80分钟）                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Part 1: 软件测试基础（20分钟，10页）                                        │
│   ├── 1.1 测试的重要性（2页）                                                │
│   ├── 1.2 测试类型（4页）                                                    │
│   │   ├── 单元测试                                                           │
│   │   ├── 集成测试                                                           │
│   │   ├── 系统测试                                                           │
│   │   └── 验收测试                                                           │
│   ├── 1.3 测试方法（2页）                                                    │
│   │   ├── 黑盒测试                                                           │
│   │   └── 白盒测试                                                           │
│   └── 1.4 测试驱动开发（2页）                                                │
│                                                                              │
│   Part 2: Rust测试框架（20分钟，10页）                                        │
│   ├── 2.1 #[test] 属性（3页）                                                │
│   ├── 2.2 assert! 宏（3页）                                                  │
│   ├── 2.3 测试组织（2页）                                                    │
│   └── 2.4 测试覆盖率工具（2页）                                              │
│                                                                              │
│   Part 3: AI辅助测试生成（25分钟，12页）                                      │
│   ├── 3.1 AI在测试中的作用（2页）                                            │
│   ├── 3.2 使用AI生成测试用例（4页）                                          │
│   │   ├── 输入代码                                                           │
│   │   ├── AI生成测试                                                         │
│   │   ├── 审核测试                                                           │
│   │   └── 运行验证                                                           │
│   ├── 3.3 使用AI分析覆盖率（3页）                                            │
│   ├── 3.4 使用AI发现边界条件（3页）                                          │
│   └── 3.5 实例：SQLRustGo测试（2页）                                         │
│                                                                              │
│   Part 4: 测试最佳实践（15分钟，6页）                                         │
│   ├── 4.1 测试原则（2页）                                                    │
│   ├── 4.2 测试模式（2页）                                                    │
│   └── 4.3 测试报告（2页）                                                    │
│                                                                              │
│   总结与作业（2页）                                                          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 实训课内容（2学时）

**实训名称**：测试用例编写

**实训目标**：
- 分析当前测试覆盖率
- 使用AI生成测试用例
- 运行测试验证
- 达到70%+覆盖率

---

## 第8周：代码重构与优化

### 理论课PPT大纲（2学时）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        第8讲：代码重构与优化                                  │
│                        （PPT 40页，80分钟）                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Part 1: 代码重构原则（20分钟，10页）                                        │
│   ├── 1.1 重构概念（2页）                                                    │
│   ├── 1.2 代码异味（4页）                                                    │
│   │   ├── 重复代码                                                           │
│   │   ├── 过长函数                                                           │
│   │   ├── 过大类                                                             │
│   │   └── 过长参数列表                                                       │
│   ├── 1.3 重构技术（2页）                                                    │
│   └── 1.4 重构时机（2页）                                                    │
│                                                                              │
│   Part 2: AI辅助代码重构（20分钟，10页）                                      │
│   ├── 2.1 使用AI识别重构点（3页）                                            │
│   ├── 2.2 使用AI生成重构方案（3页）                                          │
│   ├── 2.3 使用AI执行重构（2页）                                              │
│   └── 2.4 测试验证（2页）                                                    │
│                                                                              │
│   Part 3: 代码质量分析（20分钟，10页）                                        │
│   ├── 3.1 静态分析工具（3页）                                                │
│   ├── 3.2 Clippy 使用（3页）                                                 │
│   ├── 3.3 代码复杂度（2页）                                                  │
│   └── 3.4 技术债务（2页）                                                    │
│                                                                              │
│   Part 4: 第一阶段总结（20分钟，8页）                                         │
│   ├── 4.1 知识回顾（3页）                                                    │
│   ├── 4.2 能力评估（2页）                                                    │
│   ├── 4.3 项目进度检查（2页）                                                │
│   └── 4.4 第二阶段预告（1页）                                                │
│                                                                              │
│   总结与作业（2页）                                                          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 实训课内容（2学时）

**实训名称**：代码重构实践

**实训目标**：
- 使用AI识别代码异味
- 执行重构
- 运行Clippy检查
- 修复所有警告

---

## 单元总结

### 知识点回顾

| 周次 | 理论知识 | 实践技能 | 项目产出 |
|------|----------|----------|----------|
| 5 | 查询执行模型 | 执行器开发 | Executor模块 |
| 6 | 存储引擎架构 | 存储引擎开发 | Storage模块 |
| 7 | 软件测试方法 | 测试编写 | 70%+覆盖率 |
| 8 | 代码重构技术 | 重构实践 | 代码质量提升 |

### 阶段性成果

- 完成核心模块开发
- 测试覆盖率达到70%+
- 代码质量达标
- 准备进入第二阶段

---

**制定时间**: 2026-02-22
